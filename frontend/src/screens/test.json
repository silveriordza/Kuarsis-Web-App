[0] Missing x-apigateway-event or x-apigateway-context header(s)
[0] Getting product by id 6497772db683f275e421c0e1 START
[0] 8:36:57 PM: undefined, undefined: undefined
[0] GET /products/6497772db683f275e421c0e1 304 82.488 ms - -
[0] Missing x-apigateway-event or x-apigateway-context header(s)
[0] OPTIONS /scheduler?providerId=62e551baf5c6b51f61e0ef93&clientId=62e551baf5c6b51f61e0ef93&product=6497772db683f275e421c0e1 200 1.367 ms - 12
[0] Missing x-apigateway-event or x-apigateway-context header(s)
[0] 8:36:57 PM: schedulerController, helper_getScheduleByProviderId: Started: _providerId=62e551baf5c6b51f61e0ef93; _clientId=62e551baf5c6b51f61e0ef93; _product=6497772db683f275e421c0e1
[0] 8:36:57 PM: schedulerController, helper_getScheduleByProviderId: Before ProviderBlockedSchedule.find: _providerId=62e551baf5c6b51f61e0ef93
[0] 8:36:57 PM: schedulerController, helper_getScheduleByProviderId: After ProviderBlockedSchedule.find: providerBlockedSchedule=[{"_id":"64a9c171ea46708cf0d2fe49","providerId":"62e551baf5c6b51f61e0ef93","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"}],"createdAt":"2023-07-08T20:05:05.920Z","updatedAt":"2023-07-08T20:05:05.920Z","__v":0}]
[0] 8:36:57 PM: schedulerController, helper_getScheduleByProviderId: Before Provider Schedule.find: _providerId=62e551baf5c6b51f61e0ef93; _clientId=62e551baf5c6b51f61e0ef93
[0] 8:36:57 PM: schedulerController, helper_getScheduleByProviderId: After Provider Schedule.find: providerSchedule=[{"_id":"64b1e62e32effaf97a7a34d5","providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a31c742ea0d3b21d8be5","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false}]
[0] 8:36:57 PM: schedulerController, helper_getScheduleByProviderId: Provider Schedule has data
[0] 8:36:57 PM: schedulerController, helper_getScheduleByProviderId: Provider Schedule: _scheduleData=[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]
[0] 8:36:58 PM: schedulerController, helper_getScheduleByProviderId: After clientSchedule Schedule.find: clientSchedule=[{"_id":"64b1e64ae8c06d3ae6801ce9","providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false,"createdAt":"2023-07-15T00:20:26.059Z","updatedAt":"2023-07-15T00:20:26.059Z","__v":0}]
[0] 8:36:58 PM: schedulerController, helper_getScheduleByProviderId: Client Schedule has data
[0] 8:36:58 PM: schedulerController, helper_getScheduleByProviderId: seting other providers as busy: sch.providerId=62e551baf5c6b51f61e0ef93; _providerId=62e551baf5c6b51f61e0ef93
[0] 8:36:58 PM: schedulerController, helper_getScheduleByProviderId: Client Schedule: _scheduleData=[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]
[0] 8:36:58 PM: schedulerController, helper_getScheduleByProviderId: After populating schedule with scheduleData: schedule="[{\"providerId\":\"62e551baf5c6b51f61e0ef93\",\"clientId\":\"62e551baf5c6b51f61e0ef93\",\"product\":\"6497772db683f275e421c0e1\",\"scheduleData\":[{\"Subject\":\"PEDRO\",\"Id\":2,\"StartTime\":\"2023-07-15T19:30:00.000Z\",\"EndTime\":\"2023-07-15T20:00:00.000Z\",\"IsAllDay\":false,\"schedulerEventId\":\"436d0f3c-f294-453e-aa0f-64d0edc76e7f\",\"schedulerEventStatus\":\"EVENT_STATUS_RESERVED\"},{\"Subject\":\"PEDRO 2\",\"Id\":null,\"StartTime\":\"2023-07-16T21:30:00.000Z\",\"EndTime\":\"2023-07-16T22:00:00.000Z\",\"IsAllDay\":false,\"schedulerEventId\":\"436d0f3c-f294-453e-aa0f-64d0edc76e8f\",\"schedulerEventStatus\":\"EVENT_STATUS_RESERVED\"},{\"Subject\":\"Provider 1\",\"Id\":null,\"StartTime\":\"2023-07-15T23:00:00.000Z\",\"EndTime\":\"2023-07-15T23:30:00.000Z\",\"IsAllDay\":false,\"schedulerEventId\":\"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5\",\"schedulerEventStatus\":\"EVENT_STATUS_RESERVED\"}]}]"
[0] 8:36:58 PM: schedulerController, helper_getScheduleByProviderId: schedule or providerBlockedSchedule have scheduleData: schedule.length=1; providerBlockedSchedule.length=1
[0] 8:36:58 PM: schedulerController, helper_getScheduleByProviderId: schedule>0 and providerBlockedSchedule>0: schedule.length=1; providerBlockedSchedule.length=1
[0] 8:36:58 PM: schedulerController, helper_getScheduleByProviderId: schedule>0 and providerBlockedSchedule>0 after concatenation: _otherScheduleData=[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]
[0] 8:36:58 PM: schedulerController, helper_getScheduleByProviderId: schedule>0 and providerBlockedSchedule>0: scheduleResponse={"providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]}
[0] 8:36:58 PM: schedulerController, helper_getScheduleByProviderId: About to send back res.json: scheduleResponse={"providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]}
[0] GET /scheduler?providerId=62e551baf5c6b51f61e0ef93&clientId=62e551baf5c6b51f61e0ef93&product=6497772db683f275e421c0e1 304 145.868 ms - -
[0] Missing x-apigateway-event or x-apigateway-context header(s)
[0] OPTIONS /scheduler 200 0.481 ms - 12
[0] Missing x-apigateway-event or x-apigateway-context header(s)
[0] 8:37:03 PM: schedulerController, updateScheduleByProviderId: req.body={"scheduleRequestUpdate":{"schedule":{"providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED","Guid":"7a2fac85-a4ab-93a6-abd4-a1a1be29a198"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED","Guid":"eacc5c8a-ca6b-bfe9-89db-0e8da14a8a35"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED","Guid":"eb425098-58aa-82fe-4bc1-70a9e959bb05"},{"Subject":"Provider 2","Id":null,"StartTime":"2023-07-17T22:30:00.000Z","EndTime":"2023-07-17T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"ec5fdc9b-94e5-4af9-b8d5-ea8b63710cde","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]},"product":"6497772db683f275e421c0e1"}}
[0] 8:37:03 PM: schedulerController, updateScheduleByProviderId: Entering: updatedSchedule={"schedule":{"providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED","Guid":"7a2fac85-a4ab-93a6-abd4-a1a1be29a198"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED","Guid":"eacc5c8a-ca6b-bfe9-89db-0e8da14a8a35"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED","Guid":"eb425098-58aa-82fe-4bc1-70a9e959bb05"},{"Subject":"Provider 2","Id":null,"StartTime":"2023-07-17T22:30:00.000Z","EndTime":"2023-07-17T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"ec5fdc9b-94e5-4af9-b8d5-ea8b63710cde","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]},"product":"6497772db683f275e421c0e1"}
[0] 8:37:03 PM: schedulerController, updateScheduleByProviderId: Provider=Client: schedulerEventIds=436d0f3c-f294-453e-aa0f-64d0edc76e7f,3a0e1238-cd5e-4aea-a4f8-e9adabc312a5,436d0f3c-f294-453e-aa0f-64d0edc76e8f,ec5fdc9b-94e5-4af9-b8d5-ea8b63710cde
[0] 8:37:04 PM: schedulerController, updateScheduleByProviderId: Provider=Client: originalSchedule=[{"_id":"64b1e62e32effaf97a7a34d5","providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a31c742ea0d3b21d8be5","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false},{"_id":"64b1e64ae8c06d3ae6801ce9","providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false,"createdAt":"2023-07-15T00:20:26.059Z","updatedAt":"2023-07-15T00:20:26.059Z","__v":0}]
[0] 8:37:04 PM: schedulerController, updateScheduleByProviderId: originalSchedule has data
[0] 8:37:04 PM: schedulerController, updateScheduleByProviderId: After delete: originalSchedule=[{"_id":"64b1e62e32effaf97a7a34d5","providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a31c742ea0d3b21d8be5","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false},{"_id":"64b1e64ae8c06d3ae6801ce9","providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false,"createdAt":"2023-07-15T00:20:26.059Z","updatedAt":"2023-07-15T00:20:26.059Z","__v":0}]
[0] 8:37:04 PM: schedulerController, updateScheduleByProviderId: provider same as client FOUND: originalSchedule[providerIsClientIndex].scheduleData=[{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]
[0] 8:37:04 PM: schedulerController, updateScheduleByProviderId: provider same as client FOUND: updatedScheduleData=[{"Subject":"Provider 2","Id":null,"StartTime":"2023-07-17T22:30:00.000Z","EndTime":"2023-07-17T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"ec5fdc9b-94e5-4af9-b8d5-ea8b63710cde","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]
[0] 8:37:04 PM: schedulerController, updateScheduleByProviderId: AFTER UPDATING SCHEDULE DATA: originalSchedule[providerIsClientIndex].scheduleData=[{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]
[0] 8:37:04 PM: schedulerController, updateScheduleByProviderId: After updating database: originalSchedule=[{"_id":"64b1e62e32effaf97a7a34d5","providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a31c742ea0d3b21d8be5","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false},{"_id":"64b1e64ae8c06d3ae6801ce9","providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false,"createdAt":"2023-07-15T00:20:26.059Z","updatedAt":"2023-07-15T00:20:26.059Z","__v":0}]
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: Started: _providerId=62e551baf5c6b51f61e0ef93; _clientId=62e551baf5c6b51f61e0ef93; _product=6497772db683f275e421c0e1
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: Before ProviderBlockedSchedule.find: _providerId=62e551baf5c6b51f61e0ef93
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: After ProviderBlockedSchedule.find: providerBlockedSchedule=[{"_id":"64a9c171ea46708cf0d2fe49","providerId":"62e551baf5c6b51f61e0ef93","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"}],"createdAt":"2023-07-08T20:05:05.920Z","updatedAt":"2023-07-08T20:05:05.920Z","__v":0}]
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: Before Provider Schedule.find: _providerId=62e551baf5c6b51f61e0ef93; _clientId=62e551baf5c6b51f61e0ef93
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: After Provider Schedule.find: providerSchedule=[{"_id":"64b1e62e32effaf97a7a34d5","providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a31c742ea0d3b21d8be5","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false}]
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: Provider Schedule has data
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: Provider Schedule: _scheduleData=[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: After clientSchedule Schedule.find: clientSchedule=[{"_id":"64b1e64ae8c06d3ae6801ce9","providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false,"createdAt":"2023-07-15T00:20:26.059Z","updatedAt":"2023-07-15T00:20:26.059Z","__v":0}]
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: Client Schedule has data
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: seting other providers as busy: sch.providerId=62e551baf5c6b51f61e0ef93; _providerId=62e551baf5c6b51f61e0ef93
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: Client Schedule: _scheduleData=[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: After populating schedule with scheduleData: schedule="[{\"providerId\":\"62e551baf5c6b51f61e0ef93\",\"clientId\":\"62e551baf5c6b51f61e0ef93\",\"product\":\"6497772db683f275e421c0e1\",\"scheduleData\":[{\"Subject\":\"PEDRO\",\"Id\":2,\"StartTime\":\"2023-07-15T19:30:00.000Z\",\"EndTime\":\"2023-07-15T20:00:00.000Z\",\"IsAllDay\":false,\"schedulerEventId\":\"436d0f3c-f294-453e-aa0f-64d0edc76e7f\",\"schedulerEventStatus\":\"EVENT_STATUS_RESERVED\"},{\"Subject\":\"PEDRO 2\",\"Id\":null,\"StartTime\":\"2023-07-16T21:30:00.000Z\",\"EndTime\":\"2023-07-16T22:00:00.000Z\",\"IsAllDay\":false,\"schedulerEventId\":\"436d0f3c-f294-453e-aa0f-64d0edc76e8f\",\"schedulerEventStatus\":\"EVENT_STATUS_RESERVED\"},{\"Subject\":\"Provider 1\",\"Id\":null,\"StartTime\":\"2023-07-15T23:00:00.000Z\",\"EndTime\":\"2023-07-15T23:30:00.000Z\",\"IsAllDay\":false,\"schedulerEventId\":\"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5\",\"schedulerEventStatus\":\"EVENT_STATUS_RESERVED\"}]}]"
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: schedule or providerBlockedSchedule have scheduleData: schedule.length=1; providerBlockedSchedule.length=1
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: schedule>0 and providerBlockedSchedule>0: schedule.length=1; providerBlockedSchedule.length=1
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: schedule>0 and providerBlockedSchedule>0 after concatenation: _otherScheduleData=[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: schedule>0 and providerBlockedSchedule>0: scheduleResponse={"providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]}
[0] 8:37:04 PM: schedulerController, helper_getScheduleByProviderId: About to send back res.json: scheduleResponse={"providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]}
[0] 8:37:04 PM: schedulerController, updateScheduleByProviderId: Updating Schedule case, After helper_getScheduleByProviderId: updatedScheduleResponse={"providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-15T19:30:00.000Z","EndTime":"2023-07-15T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-16T21:30:00.000Z","EndTime":"2023-07-16T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","schedulerEventStatus":"EVENT_STATUS_RESERVED"},{"Subject":"Provider 1","Id":null,"StartTime":"2023-07-15T23:00:00.000Z","EndTime":"2023-07-15T23:30:00.000Z","IsAllDay":false,"schedulerEventId":"3a0e1238-cd5e-4aea-a4f8-e9adabc312a5","schedulerEventStatus":"EVENT_STATUS_RESERVED"}]}
[0] PUT /scheduler 200 196.230 ms - 1063