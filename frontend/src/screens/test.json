[0] GET /scheduler?providerId=62e551baf5c6b51f61e0ef93&clientId=64a9a350742ea0d3b21d8bea 200 149.946 ms - 725
[0] Missing x-apigateway-event or x-apigateway-context header(s)
[0] OPTIONS /scheduler 200 0.264 ms - 12
[0] Missing x-apigateway-event or x-apigateway-context header(s)
[0] 3:26:11 PM: req.body={"scheduleRequestUpdate":{"schedule":{"providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a350742ea0d3b21d8bea","scheduleData":[{"Subject":"JUAN 1","Id":4,"StartTime":"2023-07-12T22:30:00.000Z","EndTime":"2023-07-12T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"6bdaa6e9-1500-4745-80e7-ebd0cf8e7ca8"}]},"product":"6497772db683f275e421c0e1"}}
[0] 3:26:11 PM: Entering: updatedSchedule={"schedule":{"providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a350742ea0d3b21d8bea","scheduleData":[{"Subject":"JUAN 1","Id":4,"StartTime":"2023-07-12T22:30:00.000Z","EndTime":"2023-07-12T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"6bdaa6e9-1500-4745-80e7-ebd0cf8e7ca8"}]},"product":"6497772db683f275e421c0e1"}
[0] 3:26:11 PM: originalSchedule=[]
[0] 3:26:11 PM: Started: _providerId=62e551baf5c6b51f61e0ef93; _clientId=64a9a350742ea0d3b21d8bea; _product=6497772db683f275e421c0e1
[0] 3:26:11 PM: Before ProviderBlockedSchedule.find: _providerId=62e551baf5c6b51f61e0ef93
[0] 3:26:11 PM: After ProviderBlockedSchedule.find: providerBlockedSchedule=[{"_id":"64a9c171ea46708cf0d2fe49","providerId":"62e551baf5c6b51f61e0ef93","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"}],"createdAt":"2023-07-08T20:05:05.920Z","updatedAt":"2023-07-08T20:05:05.920Z","__v":0}]
[0] 3:26:11 PM: Before Provider Schedule.find: _providerId=62e551baf5c6b51f61e0ef93
[0] 3:26:11 PM: After Provider Schedule.find: providerSchedule=[{"_id":"64ab095df3c129d48e96cb8f","providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a31c742ea0d3b21d8be5","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"PEDRO","Id":2,"StartTime":"2023-07-09T19:30:00.000Z","EndTime":"2023-07-09T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f"},{"Subject":"PEDRO 2","Id":null,"StartTime":"2023-07-10T21:30:00.000Z","EndTime":"2023-07-10T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false},
{"_id":"64ab09d368d132df1f75ea2a","providerId":"62e551baf5c6b51f61e0ef93","clientId":"62e551baf5c6b51f61e0ef93","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"JUAN 1","Id":4,"StartTime":"2023-07-12T22:30:00.000Z","EndTime":"2023-07-12T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"6bdaa6e9-1500-4745-80e7-ebd0cf8e7ca8"}],"itemsPrice":0,"taxPrice":0,"totalPrice":0,"isPaid":false,"isServiceProvided":false,"createdAt":"2023-07-09T19:26:11.282Z","updatedAt":"2023-07-09T19:26:11.282Z","__v":0}]
[0] 3:26:11 PM: Provider Schedule has data
[0] 3:26:11 PM: Provider Schedule: _scheduleData=[{"Subject":"Busy","Id":2,"StartTime":"2023-07-09T19:30:00.000Z","EndTime":"2023-07-09T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","IsBlock":true},{"Subject":"Busy","Id":null,"StartTime":"2023-07-10T21:30:00.000Z","EndTime":"2023-07-10T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","IsBlock":true},{"Subject":"Busy","Id":4,"StartTime":"2023-07-12T22:30:00.000Z","EndTime":"2023-07-12T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"6bdaa6e9-1500-4745-80e7-ebd0cf8e7ca8","IsBlock":true}]
[0] 3:26:11 PM: After clientSchedule Schedule.find: clientSchedule=[]
[0] 3:26:11 PM: Client Schedule: _scheduleData=[{"Subject":"Busy","Id":2,"StartTime":"2023-07-09T19:30:00.000Z","EndTime":"2023-07-09T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","IsBlock":true},{"Subject":"Busy","Id":null,"StartTime":"2023-07-10T21:30:00.000Z","EndTime":"2023-07-10T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","IsBlock":true},{"Subject":"Busy","Id":4,"StartTime":"2023-07-12T22:30:00.000Z","EndTime":"2023-07-12T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"6bdaa6e9-1500-4745-80e7-ebd0cf8e7ca8","IsBlock":true}]
[0] 3:26:11 PM: After populating schedule with scheduleData: schedule="[{\"providerId\":\"62e551baf5c6b51f61e0ef93\",\"clientId\":\"64a9a350742ea0d3b21d8bea\",\"product\":\"6497772db683f275e421c0e1\",\"scheduleData\":[{\"Subject\":\"Busy\",\"Id\":2,\"StartTime\":\"2023-07-09T19:30:00.000Z\",\"EndTime\":\"2023-07-09T20:00:00.000Z\",\"IsAllDay\":false,\"schedulerEventId\":\"436d0f3c-f294-453e-aa0f-64d0edc76e7f\",\"IsBlock\":true},{\"Subject\":\"Busy\",\"Id\":null,\"StartTime\":\"2023-07-10T21:30:00.000Z\",\"EndTime\":\"2023-07-10T22:00:00.000Z\",\"IsAllDay\":false,\"schedulerEventId\":\"436d0f3c-f294-453e-aa0f-64d0edc76e8f\",\"IsBlock\":true},{\"Subject\":\"Busy\",\"Id\":4,\"StartTime\":\"2023-07-12T22:30:00.000Z\",\"EndTime\":\"2023-07-12T23:00:00.000Z\",\"IsAllDay\":false,\"schedulerEventId\":\"6bdaa6e9-1500-4745-80e7-ebd0cf8e7ca8\",\"IsBlock\":true}]}]"
[0] 3:26:11 PM: schedule or providerBlockedSchedule have scheduleData: schedule.length=1; providerBlockedSchedule.length=1
[0] 3:26:11 PM: schedule>0 and providerBlockedSchedule>0: schedule.length=1; providerBlockedSchedule.length=1
[0] 3:26:11 PM: schedule>0 and providerBlockedSchedule>0 after concatenation: _otherScheduleData=[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"Busy","Id":2,"StartTime":"2023-07-09T19:30:00.000Z","EndTime":"2023-07-09T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","IsBlock":true},{"Subject":"Busy","Id":null,"StartTime":"2023-07-10T21:30:00.000Z","EndTime":"2023-07-10T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","IsBlock":true},{"Subject":"Busy","Id":4,"StartTime":"2023-07-12T22:30:00.000Z","EndTime":"2023-07-12T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"6bdaa6e9-1500-4745-80e7-ebd0cf8e7ca8","IsBlock":true}]
[0] 3:26:11 PM: schedule>0 and providerBlockedSchedule>0: scheduleResponse={"providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a350742ea0d3b21d8bea","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"Busy","Id":2,"StartTime":"2023-07-09T19:30:00.000Z","EndTime":"2023-07-09T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","IsBlock":true},{"Subject":"Busy","Id":null,"StartTime":"2023-07-10T21:30:00.000Z","EndTime":"2023-07-10T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","IsBlock":true},{"Subject":"Busy","Id":4,"StartTime":"2023-07-12T22:30:00.000Z","EndTime":"2023-07-12T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"6bdaa6e9-1500-4745-80e7-ebd0cf8e7ca8","IsBlock":true}]}
[0] 3:26:11 PM: About to send back res.json: scheduleResponse={"providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a350742ea0d3b21d8bea","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"Busy","Id":2,"StartTime":"2023-07-09T19:30:00.000Z","EndTime":"2023-07-09T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","IsBlock":true},{"Subject":"Busy","Id":null,"StartTime":"2023-07-10T21:30:00.000Z","EndTime":"2023-07-10T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","IsBlock":true},{"Subject":"Busy","Id":4,"StartTime":"2023-07-12T22:30:00.000Z","EndTime":"2023-07-12T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"6bdaa6e9-1500-4745-80e7-ebd0cf8e7ca8","IsBlock":true}]}
[0] 3:26:11 PM: NEW Schedule Case, after helper_getScheduleByProviderId: updatedScheduleResponse={"providerId":"62e551baf5c6b51f61e0ef93","clientId":"64a9a350742ea0d3b21d8bea","product":"6497772db683f275e421c0e1","scheduleData":[{"Subject":"Busy","StartTime":"2023-07-08T12:00:00.000Z","EndTime":"2023-07-08T21:00:00.000Z","RecurrenceRule":"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;INTERVAL=1;BYHOUR=8,9,10,11,12,13,14,15,16,17","IsBlock":true,"appointmentType":"provider-busy"},{"Subject":"Busy","Id":2,"StartTime":"2023-07-09T19:30:00.000Z","EndTime":"2023-07-09T20:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e7f","IsBlock":true},{"Subject":"Busy","Id":null,"StartTime":"2023-07-10T21:30:00.000Z","EndTime":"2023-07-10T22:00:00.000Z","IsAllDay":false,"schedulerEventId":"436d0f3c-f294-453e-aa0f-64d0edc76e8f","IsBlock":true},{"Subject":"Busy","Id":4,"StartTime":"2023-07-12T22:30:00.000Z","EndTime":"2023-07-12T23:00:00.000Z","IsAllDay":false,"schedulerEventId":"6bdaa6e9-1500-4745-80e7-ebd0cf8e7ca8","IsBlock":true}]}
[0] PUT /scheduler 200 227.535 ms - 954